# Contributor:
# Maintainer: Tristan IsraÃ«l <tristan.israel@alefbet.net>
pkgname=psec-diag
pkgver=1.0
pkgrel=1
pkgdesc="PSEC - Diagnostic tool"
url="https://www.alefbet.net/"
arch="noarch"
license="MIT"
depends="python3"
makedepends="python3-dev py3-pip git"
builddir="$srcdir/$pkgname-$pkgver"
checkdepends=""
install="$pkgname.pre-install $pkgname.post-install $pkgname.post-deinstall"
subpackages=""
replaces=""
options="!check"  # no tests provided
giturl="https://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@github.com/tibsys/psec"

prepare() {
    cd "$builddir"
    git clone --depth 1 --branch v${pkgver} ${giturl} .
}

build() {
    cd "$builddir"
    python3 -m build
}

package() {
    cd "$builddir"
    python3 -m pip install --prefix=/usr --root="$pkgdir" .
}

